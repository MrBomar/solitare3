!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=22)}([function(t,e,i){"use strict";var s,r=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},n=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),a=[];function o(t){for(var e=-1,i=0;i<a.length;i++)if(a[i].identifier===t){e=i;break}return e}function h(t,e){for(var i={},s=[],r=0;r<t.length;r++){var n=t[r],h=e.base?n[0]+e.base:n[0],l=i[h]||0,c="".concat(h," ").concat(l);i[h]=l+1;var d=o(c),u={css:n[1],media:n[2],sourceMap:n[3]};-1!==d?(a[d].references++,a[d].updater(u)):a.push({identifier:c,updater:m(u,e),references:1}),s.push(c)}return s}function l(t){var e=document.createElement("style"),s=t.attributes||{};if(void 0===s.nonce){var r=i.nc;r&&(s.nonce=r)}if(Object.keys(s).forEach((function(t){e.setAttribute(t,s[t])})),"function"==typeof t.insert)t.insert(e);else{var a=n(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,d=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function u(t,e,i,s){var r=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(t.styleSheet)t.styleSheet.cssText=d(e,r);else{var n=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(n,a[e]):t.appendChild(n)}}function p(t,e,i){var s=i.css,r=i.media,n=i.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),n&&btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}var g=null,f=0;function m(t,e){var i,s,r;if(e.singleton){var n=f++;i=g||(g=l(e)),s=u.bind(null,i,n,!1),r=u.bind(null,i,n,!0)}else i=l(e),s=p.bind(null,i,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var i=h(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var s=0;s<i.length;s++){var r=o(i[s]);a[r].references--}for(var n=h(t,e),l=0;l<i.length;l++){var c=o(i[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}i=n}}}},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var r=(a=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(h," */")),n=s.sources.map((function(t){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(t," */")}));return[i].concat(n).concat([r]).join("\n")}var a,o,h;return[i].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,s){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(s)for(var n=0;n<this.length;n++){var a=this[n][0];null!=a&&(r[a]=!0)}for(var o=0;o<t.length;o++){var h=[].concat(t[o]);s&&r[h[0]]||(i&&(h[2]?h[2]="".concat(i," and ").concat(h[2]):h[2]=i),e.push(h))}},e}},function(t,e,i){var s=i(0),r=i(3);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,".foundation {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border: 1px inset;\r\n    border-radius: 1vw;\r\n    font-size: 14vw;\r\n    height: var(--card-height);\r\n    text-align: center;\r\n    top: var(--top-row-margin);\r\n    width: var(--card-width);\r\n    z-index: -1;\r\n}\r\n\r\n.mobileSymbol {\r\n    padding-top: 5vw;\r\n    font-size: 8vw;\r\n    text-align: center;\r\n    width: 13.14vw;\r\n    z-index: -1;\r\n}\r\n\r\n#SFoundation { left: var(--pile-col4-margin) }\r\n#HFoundation { left: var(--pile-col5-margin); color: red; }\r\n#DFoundation { left: var(--pile-col7-margin); color: red; }\r\n#CFoundation { left: var(--pile-col6-margin); }\r\n\r\n@media screen and (min-aspect-ratio: 741 / 741) {\r\n    \r\n    .mobileSymbol {\r\n        padding-top: 5vh;\r\n        font-size: 8vh;\r\n        width: 13.14vh;\r\n        margin-top: 1vh;\r\n    }\r\n}",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(5);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,"/* \r\nDefault view is Portrait\r\n\r\nAvailable Variables in  index.css\r\n    --card-height (vw/portrait vh/landscape)\r\n    --card-width (based on card height)\r\n    --card-spacing (vh)\r\n    --card-spacing-total (used between card piles)\r\n    --card-row-small: (card-height * .25);\r\n    --card-row-large: (card-height * .50);\r\n    --card-column: (card-width / 3);\r\n*/\r\n\r\n.card {\r\n    border: 1px solid black;\r\n    border-radius: 1vw;\r\n    box-shadow: 1px 2px black;\r\n    box-sizing: border-box;\r\n    display: grid;\r\n    height: var(--card-height);\r\n    position: fixed;\r\n    width: var(--card-width);\r\n}\r\n\r\n.card h2 {\r\n    text-align: center;\r\n    font-size: var(--card-font-small);\r\n    line-height: var(--card-row-small);\r\n    width: var(--card-column);\r\n}\r\n\r\n.cardTopLeft {\r\n    grid-row: 1;\r\n    grid-column: 1;\r\n}\r\n\r\n.cardTopRight {\r\n    grid-row: 1;\r\n    grid-column: 3;\r\n}\r\n\r\n.cardMiddle {\r\n    width: 100%;\r\n    max-width: 100%;\r\n    line-height: var(--card-row-large);\r\n    vertical-align: middle;\r\n    grid-row: 2;\r\n    grid-column-start: 1;\r\n    grid-column-end: 4;\r\n    text-align: center;\r\n    font-size: var(--card-font-large);\r\n}\r\n\r\n.cardBottomLeft {\r\n    grid-row: 3;\r\n    grid-column: 1;\r\n}\r\n\r\n.cardBottomRight {\r\n    grid-row: 3;\r\n    grid-column: 3;\r\n}\r\n\r\n.face {\r\n    grid-template-rows: var(--card-row-small) var(--card-row-large) var(--card-row-small);\r\n    grid-template-columns: calc(var(--card-width) / 3) calc(var(--card-width) / 3) calc(var(--card-width) / 3);\r\n    background-color: white;\r\n}\r\n\r\n.rear {\r\n    background-color: teal;\r\n    border-style: ridge groove groove ridge;\r\n    border: var(--card-border) solid white;\r\n}\r\n\r\n.rear h1, .rear h2 {\r\n    display: none;\r\n}\r\n\r\n.S, .C {\r\n    color: black;\r\n}\r\n\r\n.D, .H {\r\n    color: red;\r\n}",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(7);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,".menuTag {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: calc(20vw);\r\n    height: 100px;\r\n    top: var(--board-margin);\r\n    background-color: rgb(50,50,50);\r\n    color: silver;\r\n    animation-name: slide-in;\r\n    animation-duration: 0.25s;\r\n    text-align: center;\r\n    padding-top: 20px;\r\n    z-index: 100;\r\n}\r\n\r\n.hiddenTag {\r\n    display: none !important;\r\n}\r\n\r\n#homeTag { left: 0vw }\r\n#undoTag { left: 20vw }\r\n#randomTag { left: 40vw }\r\n#solvableTag { left: 60vw }\r\n#replayTag { left: 80vw }\r\n\r\n@keyframes slide-in {\r\n    from {top: -100px}\r\n    to {top: var(--board-margin)}\r\n}\r\n\r\n@media screen and (min-aspect-ratio: 1130 / 938) {    \r\n    .menuTag {\r\n        display: flex;\r\n        width: 200px;\r\n        height: calc(20vh);\r\n        padding-top: 0px;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n\r\n    .hiddenTag {\r\n        display: none;\r\n    }\r\n\r\n    #homeTag { top: 0vh; left: 50px }\r\n    #undoTag { top: 20vh; left: 50px }\r\n    #randomTag { top: 40vh; left: 50px }\r\n    #solvableTag { top: 60vh; left: 50px }\r\n    #replayTag { top: 80vh; left: 50px }\r\n\r\n    @keyframes slide-in {\r\n        from {left: -100px}\r\n        to {left: var(--board-margin)}\r\n    }\r\n}",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(9);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,".menuButton {\r\n    height: 45px;\r\n    width: calc(20vw);\r\n    background-color: black;\r\n    color: silver;\r\n    display: block;\r\n    text-align: center;\r\n    padding: 5px 0px 0px 0px;\r\n    z-index: 101;\r\n}\r\n\r\n.menuButton:hover {\r\n    background-color: rgb(50,50,50);\r\n}\r\n\r\n#homeButton { left: 0vw; font-weight: bolder; }\r\n#undoButton { left: 20vw }\r\n#randomButton { left: 40vw }\r\n#solvableButton { left: 60vw }\r\n#replayButton { left: 80vw }\r\n\r\n@media screen and (min-aspect-ratio: 1130 / 938) {\r\n    .menuButton {\r\n        display: flex;\r\n        height: calc(20vh - 6px);\r\n        width: 50px;\r\n        line-height: 100%;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n\r\n    #homeButton { top: 0vh; left: 0px; font-weight: bolder; }\r\n    #undoButton { top: 20vh; left: 0px }\r\n    #randomButton { top: 40vh; left: 0px }\r\n    #solvableButton { top: 60vh; left: 0px; }\r\n    #replayButton { top: 80vh; left: 0px; }\r\n}",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(11);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,"#menuBar {\r\n    width: 100vw;\r\n    height: 50px;\r\n    background-color: black;\r\n    z-index: 100;\r\n}\r\n\r\n@media screen and (min-aspect-ratio: 1130 / 938) {\r\n    #menuBar {\r\n        width: 50px;\r\n        height: 100vh;\r\n    }\r\n}",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(13);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,".stock {\r\n    top: var(--top-row-margin);\r\n    left: var(--pile-col1-margin);\r\n    height: var(--card-height);\r\n    width: var(--card-width);\r\n    background-color: var(--pile-bg-color);\r\n}",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(15);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,".tableau { \r\n    background-color: var(--pile-bg-color);\r\n    height: var(--tableau-height);\r\n    top: var(--tableau-top);\r\n    width: var(--card-width);\r\n}\r\n\r\n#tableau1 { left: var(--pile-col1-margin) }\r\n#tableau2 { left: var(--pile-col2-margin) }\r\n#tableau3 { left: var(--pile-col3-margin) }\r\n#tableau4 { left: var(--pile-col4-margin) }\r\n#tableau5 { left: var(--pile-col5-margin) }\r\n#tableau6 { left: var(--pile-col6-margin) }\r\n#tableau7 { left: var(--pile-col7-margin) }",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(17);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,".talon {\r\n    top: var(--top-row-margin);\r\n    left: var(--pile-col2-margin);\r\n    height: var(--card-height);\r\n    width: var(--card-width);\r\n    background-color: var(--pile-bg-color);\r\n}",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(19);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,"#autoSolve {\r\n    color: black;\r\n    top: var(--top-row-margin);\r\n    left: var(--pile-col3-margin);\r\n    height: var(--card-height);\r\n    width: var(--card-width);\r\n    display: flex;\r\n    align-content: center;\r\n    align-items: center;\r\n}\r\n\r\n#autoSolveButton {\r\n    height: var(--card-width);\r\n    width: var(--card-width);\r\n    background-color: rgb(255, 125, 0);\r\n    display: flex;\r\n    align-content: center;\r\n    align-items: center;\r\n    border-radius: 10px;\r\n    cursor: pointer;\r\n}\r\n\r\n#autoSolveButton.hidden {\r\n    display: none;\r\n}\r\n\r\n#autoSolveButton:hover {\r\n    background-color: rgb(255, 150, 0);\r\n}\r\n\r\n#autoSolveButton.mouseDown {\r\n    box-shadow: 1px 1px 5px #555 inset;\r\n}\r\n\r\n#autoSolveText {\r\n    text-align: center;\r\n}",""]),t.exports=e},function(t,e,i){var s=i(0),r=i(21);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};s(r,n);t.exports=r.locals||{}},function(t,e,i){(e=i(1)(!1)).push([t.i,"/* Portrait */\r\n\r\n* {\r\n    margin: 0px;\r\n    padding: 0px;\r\n    text-size-adjust: none;\r\n    user-select: none;\r\n    position: absolute;\r\n}\r\n\r\n:root {\r\n    --bg-color: red;\r\n    --pile-bg-color: rgba(255, 255, 255, .25);\r\n    --board-height: calc(100vh - 50px);\r\n    --board-margin: 50px;\r\n    --board-width: 100vw;\r\n    --card-height: 20.450285714285714285714285714286vw;\r\n    --card-width: calc(var(--card-height) * 0.6428571428571429);\r\n    --card-border: calc(var(--card-height) / 20);\r\n    --card-quarter: calc(var(--card-height) / 4);\r\n    --card-spacing: 1vh;\r\n    --card-row-small: calc(var(--card-height) * .25);\r\n    --card-row-large: calc(var(--card-height) * .50);\r\n    --card-column: calc(var(--card-width) / 3);\r\n    --card-font-small: 4vw;\r\n    --card-font-large: 8vw;\r\n    --tableau-height: calc(var(--board-height) - calc(var(--card-spacing) * 3) - var(--card-height));\r\n    --tableau-top: calc(var(--board-margin) + calc(var(--card-spacing) * 2) + var(--card-height));\r\n    --top-row-margin: calc(var(--board-margin) + var(--card-spacing));\r\n    --pile-col1-margin: var(--card-spacing);\r\n    --pile-col2-margin: calc(calc(var(--card-spacing) * 2) + var(--card-width));\r\n    --pile-col3-margin: calc(calc(var(--card-spacing) * 3) + calc(var(--card-width) * 2));\r\n    --pile-col4-margin: calc(calc(var(--card-spacing) * 4) + calc(var(--card-width) * 3));\r\n    --pile-col5-margin: calc(calc(var(--card-spacing) * 5) + calc(var(--card-width) * 4));\r\n    --pile-col6-margin: calc(calc(var(--card-spacing) * 6) + calc(var(--card-width) * 5));\r\n    --pile-col7-margin: calc(calc(var(--card-spacing) * 7) + calc(var(--card-width) * 6));\r\n}\r\n\r\n/* Landscape */\r\n@media screen and (min-aspect-ratio: 1130 / 938) {\r\n    :root {\r\n        --bg-color: green;\r\n        --board-height: 100vh;\r\n        --board-width: calc(100vw - var(--board-margin)); \r\n        --card-height: 24.25vh;\r\n        --card-spacing: 1vh;\r\n        --card-spacing-total: calc(var(--card-spacing) * 6);\r\n        --card-font-small: 5vh;\r\n        --card-font-large: 11vh;\r\n        --pile-margin-left: calc(var(--board-margin) + var(--card-spacing) + var(--no-name));\r\n        --tableau-height: calc(calc(var(--board-height) - calc(var(--card-spacing) * 3)) - var(--card-height));\r\n        --tableau-top: calc(calc(var(--card-spacing) * 2) + var(--card-height));\r\n        --top-row-margin: var(--card-spacing);\r\n        --no-name: calc(calc(100vw - calc(calc(var(--card-spacing) * 8) + calc(var(--card-width) * 7) + 50px)) / 2);\r\n        --pile-col1-margin: var(--pile-margin-left);\r\n        --pile-col2-margin: calc(var(--pile-margin-left) + var(--card-width) + var(--card-spacing));\r\n        --pile-col3-margin: calc(var(--pile-margin-left) + calc(calc(var(--card-width) + var(--card-spacing)) * 2));\r\n        --pile-col4-margin: calc(var(--pile-margin-left) + calc(calc(var(--card-width) + var(--card-spacing)) * 3));\r\n        --pile-col5-margin: calc(var(--pile-margin-left) + calc(calc(var(--card-width) + var(--card-spacing)) * 4));\r\n        --pile-col6-margin: calc(var(--pile-margin-left) + calc(calc(var(--card-width) + var(--card-spacing)) * 5));\r\n        --pile-col7-margin: calc(var(--pile-margin-left) + calc(calc(var(--card-width) + var(--card-spacing)) * 6));\r\n    }\r\n}\r\n\r\nbody {\r\n    background-color: var(--bg-color);\r\n}",""]),t.exports=e},function(t,e,i){"use strict";i.r(e),i.d(e,"onResizeRotate",(function(){return F})),i.d(e,"GAME",(function(){return A}));class s{constructor(t,e,i,s=!1,r=!1,n=null){this.children=[],this.cssClasses=r,this.eventListeners=s,this.fixedPOS={left:0,top:0},this.id=t,this.innerText=n,this.parent=i,this.type=e,this.object=!1,this.zIndex=0,this.addAllCSSClasses=this.addAllCSSClasses.bind(this),this.addCSSClass=this.addCSSClass.bind(this),this.addEventListener=this.addEventListener.bind(this),this.addEventListeners=this.addEventListeners.bind(this),this.build=this.build.bind(this),this.destroy=this.destroy.bind(this),this.removeCSSClass=this.removeCSSClass.bind(this),this.removeEventListeners=this.removeEventListeners.bind(this),this.getDimensions=this.getDimensions.bind(this),this.getHeight=this.getHeight.bind(this),this.getLeft=this.getLeft.bind(this),this.getPOS=this.getPOS.bind(this),this.getTop=this.getTop.bind(this),this.getWidth=this.getWidth.bind(this),this.getZIndex=this.getZIndex.bind(this),this.hasCSSClass=this.hasCSSClass.bind(this),this.moveHorizontal=this.moveHorizontal.bind(this),this.moveVerticle=this.moveVerticle.bind(this),this.setFixedLeft=this.setFixedLeft.bind(this),this.setFixedPOS=this.setFixedPOS.bind(this),this.setFixedTop=this.setFixedTop.bind(this),this.setTempLeft=this.setTempLeft.bind(this),this.setTempPOS=this.setTempPOS.bind(this),this.setTempTop=this.setTempTop.bind(this),this.setZIndex=this.setZIndex.bind(this)}addAllCSSClasses(){this.cssClasses&&this.cssClasses.forEach(t=>{this.object.classList.add(t)})}addCSSClass(t){this.cssClasses.push(t),this.object&&this.object.classList.add(t)}addEventListener(t){this.eventListeners?this.eventListeners.push(t):this.eventListeners=[t]}addEventListeners(){this.eventListeners&&this.eventListeners.forEach(t=>{this.object.addEventListener(t.action,t.method)})}build(){let t=document.createElement(this.type);t.id=this.id,null!=this.innerText&&(t.innerText=this.innerText),this.parent.appendChild(t),this.object=t,this.addAllCSSClasses(),this.addEventListeners()}destroy(){this.removeEventListeners(),this.children.length>0&&this.children.forEach(t=>t.destroy()),this.parent.removeChild(this.object)}getDimensions(){return{top:this.getTop(),right:this.getLeft()+this.getWidth(),bottom:this.getTop()+this.getHeight(),left:this.getLeft()}}getHeight(){return this.object.offsetHeight}getLeft(){return this.object.offsetLeft}getPOS(){return{left:this.getLeft(),top:this.getTop()}}getTop(){return this.object.offsetTop}getWidth(){return this.object.offsetWidth}getZIndex(){return this.zIndex}hasCSSClass(t){return this.object.classList.contains(t)}moveVerticle(t){this.object.style.top=this.object.offsetTop+t}moveHorizontal(t){this.object.style.left=this.object.offsetLeft+t}removeCSSClass(t){let e=this.cssClasses.indexOf(t);e>-1&&(this.cssClasses.splice(e,1),this.object.classList.remove(t))}removeEventListeners(){this.eventListeners&&this.eventListeners.forEach(t=>{this.object.removeEventListener(t.action,t.method)})}setFixedLeft(t){this.fixedPOS.left=t,this.object.style.left=t+"px"}setFixedPOS(t,e){this.fixedPOS.left=t,this.fixedPOS.top=e,this.object.style.left=t+"px",this.object.style.top=e+"px"}setFixedTop(t){this.fixedPOS.top=t,this.object.style.top=t+"px"}setTempLeft(t){this.object.style.left=t+"px"}setTempPOS(t,e){this.object.style.left=t+"px",this.object.style.top=e+"px"}setTempTop(t){this.object.style.top=t+"px"}setZIndex(t){this.zIndex=t,this.object.style.zIndex=t}}class r extends s{constructor(t,e,i=!1,s=!1,r=null){super(t,e,document.body,i,s,r),this.cards=[],this.addCard=this.addCard.bind(this),this.getCardObject=this.getCardObject.bind(this),this.getCards=this.getCards.bind(this),this.getFaceDownCards=this.getFaceDownCards.bind(this),this.getFaceUpCards=this.getFaceUpCards.bind(this),this.getTopCard=this.getTopCard.bind(this),this.nextCardPOS=this.nextCardPOS.bind(this),this.refresh=this.refresh.bind(this),this.selectCards=this.selectCards.bind(this)}addCard(t){typeof t===Array?this.cards.concat(t):this.cards.push(t)}getCardObject(t){return!!this.cards&&this.cards.find(e=>e.id==t.id)}getCards(t){let e=this.cards.findIndex(e=>e===t[0]);return this.cards.splice(e,this.cards.length-e)}getFaceDownCards(){return!!this.cards&&this.cards.filter(t=>!t.face)}getFaceUpCards(){return!!this.cards&&this.cards.filter(t=>t.face)}getTopCard(){return!!this.cards&&this.cards[this.cards.length-1]}nextCardPOS(){return{left:this.getLeft(),top:this.getTop()}}refresh(){this.cards.forEach(t=>{t.setFixedPOS(this.getLeft(),this.getTop()),t.setZIndex(this.cards.indexOf(t))})}selectCards(t){let e=this.cards.findIndex(e=>e.id===t.id);return this.cards.slice(e,this.card.length)}}const n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],a=["A",2,3,4,5,6,7,8,9,10,"J","Q","K"],o=["A","B","C","D","E","F","G","H","I","J","K","L","M"],h=["S","C","H","D","♠","♣","♥","♦"],l=t=>a[o.indexOf(t)],c=t=>h[h.indexOf(t)+4];var d={FromAlpha:t=>n.indexOf(t),ToAlpha:t=>n[t],FromFaceValue:t=>o[a.indexOf(t)],ToFaceValue:l,ToSymbol:c,FromSymbol:t=>h[h.indexOf(t)-4],SuiteValues:()=>h.slice(0,4),SuiteSymbols:()=>h.slice(4,8),InterpretID:t=>""+(c(t.charAt(0))+l(t.charAt(1)))};i(2);class u extends r{constructor(t,e=!1){super(t+"Foundation","h1",e,["foundation"],d.ToSymbol(t)),this.suite=t,this.validateMove=this.validateMove.bind(this),this.build()}validateMove(t){if(1==t.cards.length&&t.cards[0].getSuite()==this.suite)if(0==this.cards.length){if("A"==t.cards[0].getValue())return!0}else if(d.FromAlpha(t.cards[0].getValue())==d.FromAlpha(this.getTopCard().getValue())+1)return!0;return!1}}i(4);class p extends s{constructor(t,e,i,s=!1){super(e,"div",i,!1,["card"]),this.backgroundColor="black",this.currentGame=t,this.fixedPOS={left:0,top:0},this.tempPOS={left:0,top:0},this.face=s,this.buildCard=this.buildCard.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.flip=this.flip.bind(this),this.getColor=this.getColor.bind(this),this.getSuite=this.getSuite.bind(this),this.getValue=this.getValue.bind(this),this.buildCard()}buildCard(){this.addEventListener({action:"mousedown",method:this.onMouseDown}),this.addEventListener({action:"mousemove",method:this.onMouseMove}),this.addEventListener({action:"mouseup",method:this.onMouseUp}),this.build(),this.children.push(new s(this.id+"TopLeft","h2",this.object,!1,["cardTopLeft"],d.ToFaceValue(this.id.charAt(1)))),this.children.push(new s(this.id+"TopRight","h2",this.object,!1,["cardTopRight"],d.ToSymbol(this.id.charAt(0)))),this.children.push(new s(this.id+"Middle","h1",this.object,!1,["cardMiddle"],d.ToSymbol(this.id.charAt(0)))),this.children.push(new s(this.id+"BottomLeft","h2",this.object,!1,["cardBottomLeft"],d.ToSymbol(this.id.charAt(0)))),this.children.push(new s(this.id+"BottomRight","h2",this.object,!1,["cardBottomRight"],d.ToFaceValue(this.id.charAt(1)))),this.children.forEach(t=>t.build()),this.addCSSClass(this.face?"face":"rear"),this.addCSSClass(this.id.charAt(0))}onMouseDown(t){this.currentGame.onCardMouseDown(this.id,{left:t.clientX,top:t.clientY})}onMouseUp(t){this.currentGame.onCardMouseUp(t)}flip(t=null,e){(null==t?this.face:!t)?(this.removeCSSClass("face"),this.hasCSSClass("rear")||this.addCSSClass("rear"),this.face=!1):(this.removeCSSClass("rear"),this.hasCSSClass("face")||this.addCSSClass("face"),this.face=!0)}getColor(){let t=this.getSuite();return"S"==t||"C"==t?"black":"red"}getSuite(){return this.id.charAt(0)}getValue(){return this.id.charAt(1)}}class g{constructor(t){this.currentGame=t,this.getRandomDeck=this.getRandomDeck.bind(this),this.getSolvableDeck=this.getSolvableDeck.bind(this),this.randomizeArray=this.randomizeArray.bind(this),this.reconstituteDeck=this.reconstituteDeck.bind(this)}getRandomDeck(){let t=[];return d.SuiteValues().forEach(e=>{o.forEach(i=>{t.push(`${e}${i}`)})}),this.randomizeArray(t).map(t=>new p(this.currentGame,t,document.body,!1))}getSolvableDeck(){}randomizeArray(t){let e=[];do{e.push(t.splice(Math.floor(Math.random()*t.length),1)[0])}while(t.length>0);return e}reconstituteDeck(t){}}i(6);class f extends s{constructor(t,e,i,s){super(t+"Tag","h1",e,i,["menuTag","hiddenTag"],s),this.build()}}i(8);class m extends s{constructor(t,e,i,s){super(t+"Button","h1",e,i,["menuButton"],s),this.build()}}i(10);class b extends s{constructor(t){super("menuBar","div",document.body),this.currentGame=t,this.buildMenu=this.buildMenu.bind(this),this.getButtonId=this.getButtonId.bind(this),this.onButtonClick=this.onButtonClick.bind(this),this.onButtonHover=this.onButtonHover.bind(this),this.onHomeClick=this.onHomeClick.bind(this),this.onRandomClick=this.onRandomClick.bind(this),this.onReplayClick=this.onReplayClick.bind(this),this.onSolvableClick=this.onSolvableClick.bind(this),this.onUndoClick=this.onUndoClick.bind(this),this.buildMenu()}buildMenu(){this.build();let t=[{action:"mouseover",method:this.onButtonHover},{action:"mouseout",method:this.onButtonHover},{action:"click",method:this.onButtonClick}];this.children.push(new f("home",this.object,t,"Home")),this.children.push(new m("home",this.object,t,"⌂")),this.children.push(new f("undo",this.object,t,"Undo")),this.children.push(new m("undo",this.object,t,"⮌")),this.children.push(new f("random",this.object,t,"Random")),this.children.push(new m("random",this.object,t,"⤨")),this.children.push(new f("solvable",this.object,t,"Solvable")),this.children.push(new m("solvable",this.object,t,"✔")),this.children.push(new f("replay",this.object,t,"Replay")),this.children.push(new m("replay",this.object,t,"⥀"))}getButtonId(t){let e=t.substr(0,t.indexOf("Button"));return""==e&&(e=t.substr(0,t.indexOf("Tag"))),e}onButtonClick(t){switch(this.getButtonId(t.target.id)){case"home":this.onHomeClick();break;case"undo":this.onUndoClick(t);break;case"random":this.onRandomClick();break;case"solvable":this.onSolvableClick();break;case"replay":this.onReplayClick()}}onButtonHover(t){let e=this.getButtonId(t.target.id),i=this.children.find(t=>t.id===e+"Tag");i.cssClasses.includes("hiddenTag")?i.removeCSSClass("hiddenTag"):i.addCSSClass("hiddenTag")}onHomeClick(){console.log("MenuBar.onHomeClick():")}onUndoClick(t){this.currentGame.winDetected||this.currentGame.undoArray.length>0&&!this.currentGame.winDetected&&this.currentGame.animations.push(this.currentGame.undoArray.pop())}onRandomClick(){console.log("MenuBar.onRandomClick():");let t=new g(this.currentGame);this.currentGame.clearGame(),this.currentGame.getPile("stock").cards=t.getRandomDeck(),this.currentGame.virginStock=[...this.currentGame.getPile("stock").cards],this.currentGame.getPile("stock").refresh(),this.currentGame.dealFromStock(),F("deal")}onSolvableClick(){console.log("MenuBar.onSolvableClick():")}onReplayClick(){console.log("MenuBar.onReplayClick():")}}i(12);class v extends r{constructor(t,e=!1){super("stock","div",e,["stock"]),this.currentGame=t,this.onMouseClick=this.onMouseClick.bind(this),this.addEventListener({action:"click",method:this.onMouseClick}),this.refresh=this.refresh.bind(this),this.build()}onMouseClick(t){this.currentGame.onStockClick(t)}refresh(){this.cards.forEach(t=>{t.setFixedPOS(this.getLeft(),this.getTop()),t.setZIndex(this.cards.indexOf(t)),t.flip(!1)})}validateMove(){}}i(14);class x extends r{constructor(t,e=!1){super("tableau"+t,"div",e,["tableau"]),this.calculateMargin=this.calculateMargin.bind(this),this.initCards=Number(t),this.nextCardPOS=this.nextCardPOS.bind(this),this.refresh=this.refresh.bind(this),this.build()}calculateMargin(t){return t.face?t.getHeight()/4:t.getHeight()/8}pileComplete(){return!(this.cards.filter(t=>!1===t.face).length>0)}nextCardPOS(){if(0==this.cards.length)return{left:this.getLeft(),top:this.getTop()};{let t=this.getTopCard(),e=t.getTop()+this.calculateMargin(t);return{left:this.getLeft(),top:e}}}refresh(){if(this.cards.length){let t=0;this.cards.forEach(e=>{e.setFixedTop(this.object.offsetTop+t),t+=this.calculateMargin(e),e.setFixedLeft(this.getLeft()),e.setZIndex(this.cards.indexOf(e))})}}validateMove(t){if(!t)return!1;if(this.cards.length){let e=t.cards[0],i=this.getTopCard();if(e.getColor()!=i.getColor()&&d.FromAlpha(e.getValue())==d.FromAlpha(i.getValue())-1)return!0}else if("M"===t.cards[0].id.charAt(1))return!0;return!1}}i(16);class C extends r{constructor(t,e=!1){super("talon","div",e,["talon"]),this.currentGame=t,this.refresh=this.refresh.bind(this),this.validateMove=this.validateMove.bind(this),this.build()}refresh(){this.cards.forEach(t=>{t.setFixedPOS(this.getLeft(),this.getTop()),t.setZIndex(this.cards.indexOf(t)),t.flip(!0)})}validateMove(){return"stock"==this.currentGame.selection.pile.id}}class w{constructor(t,e,i){this.currentGame=t,this.frameData=null,this.frames=[],this.posData=null,this.selection=e,this.target=i,this.execute=this.execute.bind(this),this.executionMethod=this.executionMethod.bind(this),this.setFrameData=this.setFrameData.bind(this),this.setPOSData=this.setPOSData.bind(this),this.transferCards=this.transferCards.bind(this)}execute(){this.executionMethod()}executionMethod(){if(this.frames.length>0)this.frames.shift().execute();else{let t=this.currentGame.animations.indexOf(this);this.currentGame.animations.splice(t,1)}}setFrameData(){let t=window.innerWidth/(this.currentGame.animationFrameRate*this.currentGame.animationLength),e=window.innerHeight/(this.currentGame.animationFrameRate*this.currentGame.animationLength),i=this.posData.endLeft-this.posData.startLeft,s=this.posData.endTop-this.posData.startTop,r=Math.abs(i/t),n=Math.abs(s/e),a=Math.round(r>n?r:n),o=Math.round(i/a),h=Math.round(s/a);this.frameData={xPixels:o,yPixels:h,frames:a}}setPOSData(){let t={startLeft:this.selection.cards[0].getLeft(),startTop:this.selection.cards[0].getTop(),endLeft:this.target.getLeft(),endTop:this.target.getTop()};if(this.target instanceof x){let e=this.target.nextCardPOS();t.endLeft=e.left,t.endTop=e.top}this.posData=t}transferCards(){let t=this.selection.pile.cards.splice(this.selection.index,this.selection.cards.length);"restock"===this.type&&t.reverse(),this.target.cards=this.target.cards.concat(t)}}class S{constructor(t){this.cards=t,this.execute=this.execute.bind(this)}execute(){this.cards.forEach(t=>{t.flip()})}}class T{constructor(t,e){this.cards=t,this.posData=e,this.execute=this.execute.bind(this)}execute(){this.cards.forEach(t=>{t.getZIndex()<100&&t.setZIndex(100+t.getZIndex()),t.setTempLeft(t.getLeft()+this.posData.xPixels),t.setTempTop(t.getTop()+this.posData.yPixels)})}}class y extends w{constructor(t,e,i){super(t,e,i),this.execute=this.execute.bind(this)}execute(){this.selection.pile.refresh(),this.target.refresh()}}class k{constructor(t){this.currentGame=t,this.execute=this.execute.bind(this)}execute(){this.currentGame.detectWin()}}class M extends w{constructor(t,e,i){super(t,e,i),this.flips=[],this.frames=[],this.type=null,this.build=this.build.bind(this),this.setFrameData=this.setFrameData.bind(this),this.setPOSData=this.setPOSData.bind(this),this.setType=this.setType.bind(this),this.build()}build(){this.setType(),this.setPOSData(),this.setFrameData(),"preflip"!==this.type&&"restock"!==this.type||(this.frames.push(new S(this.selection.cards)),this.selection.cards.forEach(t=>this.flips.push(t))),this.transferCards();for(let t=0;t<this.frameData.frames;t++)this.frames.push(new T(this.selection.cards,this.frameData));if(this.frames.push(new y(this.currentGame,this.selection,this.target)),"postflip"===this.type&&this.selection.pile.cards.length>0){let t=this.selection.pile.getTopCard();!1===t.face&&(this.frames.push(new S([t])),this.flips.push(t))}"deal"===this.type&&this.target.cards.length==this.target.initCards&&(this.frames.push(new S(this.selection.cards)),this.selection.cards.forEach(t=>this.flips.push(t))),"deal"!=this.type&&this.frames.push(new k(this.currentGame))}setType(){this.selection.pile instanceof v?(this.target instanceof C&&(this.type="preflip"),this.target instanceof x&&(this.type="deal")):this.selection.pile instanceof C?(this.target instanceof u&&(this.type="noflip"),this.target instanceof x&&(this.type="noflip"),this.target instanceof v&&(this.type="restock")):this.selection.pile instanceof x?this.type="postflip":this.selection.pile instanceof u&&(this.type="noflip")}}class D extends w{constructor(t,e,i,s){super(t,e,i),this.type=s,this.execute=this.execute.bind(this)}execute(){this.transferCards()}}class P{constructor(t,e,i,s){this.cards=t,this.pile=e,this.index=i,this.clickPOS=s}}class L extends w{constructor(t,e,i,s,r,n){super(t,new P(s,e,e.cards.indexOf(s[0]),!1),i),this.flips=r,this.built=!1,this.type=n,this.build=this.build.bind(this)}build(){this.setPOSData(),this.setFrameData(),"restock"==this.type&&(this.selection.index=0),this.frames.push(new D(this.currentGame,this.selection,this.target,this.type)),this.flips.length>0&&this.frames.push(new S(this.flips));for(let t=0;t<this.frameData.frames;t++)this.frames.push(new T(this.selection.cards,this.frameData));this.frames.push(new y(this.currentGame,this.selection,this.target))}execute(){!1===this.built?(this.build(),this.built=!0):this.executionMethod()}}class O extends w{constructor(t,e){super(t,e,e.pile),this.build()}build(){let t=this.selection.cards[0];this.posData={startLeft:t.getLeft(),startTop:t.getTop(),endLeft:t.fixedPOS.left,endTop:t.fixedPOS.top},this.setFrameData();for(let t=0;t<this.frameData.frames;t++)this.frames.push(new T(this.selection.cards,this.frameData));this.frames.push(new y(this.currentGame,this.selection,this.selection.pile))}}i(18);class j extends s{constructor(t,e){super("autoSolveButton","div",e,!1,["hidden"]),this.currentGame=t,this.buildButton=this.buildButton.bind(this),this.onMouseClick=this.onMouseClick.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.unhide=this.unhide.bind(this),this.buildButton()}buildButton(){this.addEventListener({action:"click",method:this.onMouseClick}),this.addEventListener({action:"mousedown",method:this.onMouseDown}),this.addEventListener({action:"mouseup",method:this.onMouseUp}),this.build(),this.children.push(new s("autoSolveText","h1",this.object,!1,!1,"Auto Solve")),this.children[0].build()}onMouseClick(t){console.log("AutoSolveButton.onMouseClick()")}onMouseDown(t){this.hasCSSClass("mouseDown")||this.addCSSClass("mouseDown")}onMouseUp(t){this.hasCSSClass("mouseDown")&&this.removeCSSClass("mouseDown")}unhide(){this.hasCSSClass("hidden")&&this.removeCSSClass("hidden")}}class B extends s{constructor(t,e){super("autoSolve","div",e,!1,!1),this.currentGame=t,this.buildDiv=this.buildDiv.bind(this),this.unhide=this.unhide.bind(this),this.buildDiv()}buildDiv(){this.build(),this.children.push(new j(this.currentGame,this.object))}unhide(){this.children[0].unhide()}}i(20);let A=new class{constructor(){this.allPiles=[],this.animations=[],this.animationFrameRate=60,this.animationLength=.5,this.animationTimer=null,this.autoSolveButton=null,this.dealOrder=!1,this.dealTimer=!1,this.doubleClickTimer=!1,this.menuBar=null,this.selection=null,this.selectionTimer=null,this.target=null,this.undoArray=[],this.virginStock=!1,this.winDetected=!1,this.autoSolve=this.autoSolve.bind(this),this.cancelMove=this.cancelMove.bind(this),this.clearDoubleClickTimer=this.clearDoubleClickTimer.bind(this),this.clearSelection=this.clearSelection.bind(this),this.clearTarget=this.clearTarget.bind(this),this.completeMove=this.completeMove.bind(this),this.dealFromStock=this.dealFromStock.bind(this),this.dealTimerAction=this.dealTimerAction.bind(this),this.detectWin=this.detectWin.bind(this),this.getCardPileAndIndex=this.getCardPileAndIndex.bind(this),this.getPile=this.getPile.bind(this),this.getTableau=this.getTableau.bind(this),this.loadGame=this.loadGame.bind(this),this.onStockClick=this.onStockClick.bind(this),this.setDoubleClickTimer=this.setDoubleClickTimer.bind(this),this.setTarget=this.setTarget.bind(this),this.startAnimationTimer=this.startAnimationTimer.bind(this),this.loadGame()}autoSolve(){}cancelMove(){this.selection&&(this.animations.push(new O(this,this.selection)),this.clearTarget(),this.clearSelection())}clearDoubleClickTimer(){clearTimeout(this.doubleClickTimer),this.doubleClickTimer=!1,null!=this.selection&&this.selection.pile.refresh(),null!=this.target&&this.target.refresh(),this.clearSelection(),this.clearTarget()}clearGame(){this.allPiles.forEach(t=>{t.cards.forEach(t=>t.destroy()),t.cards=[]}),this.animations=[],this.animationTimer=null,this.dealOrder=!1,this.dealTimer=!1,this.doubleClickTimer=!1,this.clearSelection(),this.selectionTimer=null,this.clearTarget(),this.undoArray=[],this.virginStock=!1}clearSelection(){this.selection=null}clearTarget(){this.target=null}completeMove(t=!1){let e=new M(this,this.selection,this.target);if("deal"!=t){let i=[...this.selection.cards],s=[...e.flips],r=this.target,n=this.selection.pile;this.undoArray.push(new L(this,r,n,i,s,t))}this.animations.push(e),this.clearSelection(),this.clearTarget()}dealFromStock(){this.dealOrder=["tableau1","tableau2","tableau3","tableau4","tableau5","tableau6","tableau7","tableau2","tableau3","tableau4","tableau5","tableau6","tableau7","tableau3","tableau4","tableau5","tableau6","tableau7","tableau4","tableau5","tableau6","tableau7","tableau5","tableau6","tableau7","tableau6","tableau7","tableau7"],this.dealTimer=setInterval(()=>{this.dealOrder.length>0?(this.target=this.getPile(this.dealOrder.shift()),this.setSelection(this.getCardPileAndIndex(this.getPile("stock").getTopCard().id,{top:0,left:0})),this.completeMove("deal")):(clearInterval(this.dealTimer),this.dealTimer=!1)},190)}dealTimerAction(){if(this.setSelection(this.getCardPileAndIndex(this.getPile("stock").getTopCard().id)),this.target=this.getPile(this.dealOrder.shift()),this.onCardMouseUp(!1,"deal"),this.dealOrder.length>0)this.dealTimer=setTimeout(()=>{this.dealTimerAction()},200);else{let t=this.animations[this.animations.length-1];this.getTableau().forEach(e=>{t.push(new FlipTopCard(e))})}}detectWin(){let t=this.getTableau().filter(t=>{let e=t.pileComplete();return console.log(e),1==e});console.log(t),7==t.length&&(this.winDetected=!0,this.autoSolveButton.unhide())}getCardPileAndIndex(t,e=!1){let i=!1;return this.allPiles.forEach(s=>{for(let r=0;r<s.cards.length;r++)s.cards[r].id==t&&(i=new P(s.cards.slice(r,s.cards.length),s,r,e))}),i}getPile(t){return!!this.allPiles&&this.allPiles.find(e=>e.id==t)}getTableau(){return!!this.allPiles&&this.allPiles.filter(t=>t instanceof x)}getValidTarget(){let t=this.allPiles.filter(t=>{if(t.id!==this.selection.pile.id&&"stock"!=t.id&&"talon"!=t.id)return!0}),e=t.filter(t=>t instanceof u).find(t=>t.validateMove(this.selection));return void 0===e?t.filter(t=>t instanceof x).find(t=>t.validateMove(this.selection)):e}loadGame(){["1","2","3","4","5","6","7"].forEach(t=>{this.allPiles.push(new x(t))}),this.allPiles.push(new v(this)),this.allPiles.push(new C(this)),["S","H","D","C"].forEach(t=>{this.allPiles.push(new u(t))}),this.menuBar=new b(this),this.autoSolveButton=new B(this,document.body),this.startAnimationTimer()}onCardMouseDown(t,e){this.setSelection(this.getCardPileAndIndex(t,e))}onCardMouseUp(t){this.selection?this.selection.pile instanceof v?(this.target=this.getPile("talon"),this.completeMove()):(this.target=this.target?this.target:this.setTarget(t.clientX,t.clientY),this.target?this.selection.pile===this.target?this.doubleClickTimer?(this.target=this.getValidTarget(),void 0===this.target?this.cancelMove():this.selection.cards[0].face&&this.completeMove()):this.setDoubleClickTimer():this.target.validateMove(this.selection)?this.completeMove():this.cancelMove():this.cancelMove()):this.cancelMove()}onMouseMove(t){if(this.selection){if(!1===this.selection.cards[0].face||this.target)return;let e={left:t.clientX-this.selection.clickPOS.left,top:t.clientY-this.selection.clickPOS.top},i=this.selection.cards.length;for(let t=0;t<i;t++){let i=this.selection.cards[t],s=i.fixedPOS.top+e.top,r=i.fixedPOS.left+e.left;i.getZIndex()<100&&i.setZIndex(100+t),i.setTempPOS(r,s)}}}onStockClick(t){let e=this.getPile("stock"),i=this.getPile("talon");if(0==e.cards.length&&i.cards.length>0){let s=[...i.cards];this.setSelection({pile:i,cards:s,index:0,clickPOS:{left:t.clientX,top:t.clientY}}),this.target=e,this.completeMove("restock")}}setDoubleClickTimer(){this.doubleClickTimer=setTimeout(this.clearDoubleClickTimer,300)}setSelection(t){this.selection=t}setTarget(t,e){return this.allPiles.find(i=>{let s=i.getDimensions();if(t>s.left&&t<s.right&&e>s.top&&e<s.bottom)return!0})}startAnimationTimer(){this.animationTimer=setInterval(()=>{this.animations.length>0&&this.animations.forEach(t=>{t.execute()})},500/this.animationFrameRate)}};const F=t=>{A.allPiles.forEach(e=>e.refresh(t))};F(),window.addEventListener("resize",F),window.addEventListener("orientationchange",F),document.body.addEventListener("mousemove",t=>{A.onMouseMove(t),(t.clientX<10||t.clientY<10||t.clientX>window.innerWidth-10||t.clientY>window.innerHeight-10)&&A.selection&&A.selection.cards[0].onMouseUp(t)})}]);